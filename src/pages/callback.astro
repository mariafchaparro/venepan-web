---
import { supabase } from "../lib/supabase";
export const prerender = false;

const { data: { session }, error } = await supabase.auth.getSession();

if (error || !session) {
  return Astro.redirect("/login");
}

// Aquí podrías hacer lógica extra, ej: registrar el usuario en tu DB
// await saveUser(session.user)

return Astro.redirect("/dashboard"); 
---
